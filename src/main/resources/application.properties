spring.application.name=LangIA

# ==========================================
# SERVER CONFIGURATION (DEV)
# ==========================================
server.port=8080
server.address=0.0.0.0

# Mostrar erros completos em DEV
server.error.include-message=always
server.error.include-stacktrace=always
server.error.include-binding-errors=always

# ==========================================
# ACTUATOR (DEV - Mais endpoints expostos)
# ==========================================
management.endpoints.web.exposure.include=health,info,metrics,env
management.endpoint.health.show-details=always
management.health.defaults.enabled=true


# ==========================================
# REDIS CONFIGURATION
# ==========================================
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=60000
spring.data.redis.jedis.pool.max-active=8
spring.data.redis.jedis.pool.max-idle=8
spring.data.redis.jedis.pool.min-idle=0

# ==========================================
# DATABASE
# ==========================================
spring.datasource.url=jdbc:postgresql://localhost:5432/${POSTGRES_DB}
spring.datasource.username=${POSTGRES_USER}
spring.datasource.password=${POSTGRES_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Hikari Pool (configuração leve para dev)
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000

# ==========================================
# JPA/HIBERNATE (DEV - Verbose)
# ==========================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ==========================================
# LOGGING (DEV - Detalhado)
# ==========================================
logging.level.root=INFO
logging.level.com.langia.backend=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# ==========================================
# DEVTOOLS (Habilitado em DEV)
# ==========================================
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true
spring.devtools.restart.poll-interval=1s
spring.devtools.restart.quiet-period=400ms

# ==========================================
# SECURITY (DEV - Mais permissivo)
# ==========================================
# Valores devem ser definidos via variáveis de ambiente (SPRING_SECURITY_USER_NAME/SPRING_SECURITY_USER_PASSWORD)
spring.security.user.name=${SPRING_SECURITY_USER_NAME:}
spring.security.user.password=${SPRING_SECURITY_USER_PASSWORD:}

# ==========================================
# JWT CONFIGURATION
# ==========================================
# JWT secret key (must be provided via environment variable JWT_SECRET_KEY)
# Minimum length: 32 characters (≈256 bits). Application will fail to start if missing/weak.
jwt.secret-key=${JWT_SECRET_KEY:}
# Token expiration time in milliseconds (default: 1 hour = 3600000 ms)
jwt.expiration-ms=${JWT_EXPIRATION_MS:3600000}

# ==========================================
# OUTROS (DEV)
# ==========================================
spring.jpa.open-in-view=true
spring.output.ansi.enabled=always
